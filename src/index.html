<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>TestApp</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <script type="text/javascript">
    // global variable
    var jsBridge;
    /*
     * Encapsulate the native app bridging
     * Use JavaScript ES5 prototype-based inheritance
     */
    var Android = function() {
      if (jsBridge) {
        this._jsBridge = jsBridge;
      }
    }
    Android.prototype.onData = function(jsonData) {
      console.log("passing jsonData to android: " + jsonData);
      //_jsBridge.onData(jsonData);
    };

    var NativeAppInterface = function() {
      if (navigator.userAgent.match(/Android/i)) {
        this._instance = new Android();
        return;
      }
    }
    NativeAppInterface.prototype.onData = function(jsonData) {
      console.log("passing jsonData to native app: " + jsonData);
      this._instance.onData(jsonData);
    };

    var nativeApp = new NativeAppInterface();
  </script>
</head>

<body>
  <app-root>
    <!-- put the angular main's component here -->
  </app-root>

  <h2>Invoke Angular's function from javascript: </h2>

  <!-- Example directly calling angular's component via javascript --> 
  <button style="background:#EFEFEF; cursor:pointer" onClick="javascript:window.ngAppComponent.publicFunc1('test 123')">
    ngAppComponent.publicFunc1
  </button>

  <script type="text/javascript">
  function invokeAngular2() {
    var jsonData;
    jsonData = window.ngAppComponent.publicFunc2();
    alert(jsonData);
  }
  </script>

  <button style="background:#EFEFEF; cursor:pointer" onClick="javascript:invokeAngular2()">
      ngAppComponent.publicFunc2
    </button>
  <br/>

</body>
</html>
